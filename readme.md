# コーディング共有事項
レンダリング速度に影響するリクエスト数と画像の描画処理を減らす事に重点を置く。  

## EJS/PUG
### HTMLテンプレート言語を使う要件
納品するデータが静的HTMLファイル
LPや小規模のページ
繰り返し同じ表現やコンポーネントが存在する

### メリット
- html側で変数、includeやfor、ifを使用できる。
- htmlを細かくコンポーネント(パーツ)化し、管理しやすくできる。
- ローカルサーバーやphp動作環境が不要。
- コンパイルの速度が早く、タスクランナーで監視できる。
- テスト用FTPにアップロードしたりブラウザでリロード…という手間がかからない

### デメリット
特になし  
html内にphpを組み込んだり、ifやforがある程度使えれば学習コストはほぼない。

## JavaScript
### モジュール化
よく使う表現や機能をモジュールにしてwebpackでバンドルしています。

### よく使うモジュール
* アンカーリンクのスムーズスクロール
cssにscroll-behavior: smoothの対応ブラウザが増えればそっちがいい

* スクロール検知
scrollイベントよりintersectionObserverがおすすめ。
操作したい要素と監視の対象となる要素が同一で、初期位置がビューポートの外側にあるまたはtransformやclip-pathで極端に小さくなっている場合はintersectionObserverで監視でない場合があります。  
その他scrollイベントをトリガーにせざるを得ないケースではthrottleを使ってイベントの実行回数を間引きする。

* メニューボタンなどのトグルスイッチ
イベントのトリガーとは別の要素を操作するときの処理が煩雑なので調整したい。

### モジュールにしたほうがよさそうなやつ

* モーダルウィンドウ
あまり最適解が出てない
背面のスクロールの無効化はpreventDefaultとtouchmoveのイベントリスナを消したり付けたりしてる。